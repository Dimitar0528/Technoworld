---
import CheckoutSteps from "@components/utilities/CheckoutSteps.astro";
import MainHead from "@layouts/MainHead.astro";
---
<MainHead title="Payment Canceled | Technoworld" description="The page shows when the user cancels his payment"/>
<section style="text-align: center; margin-top:2rem">
        <CheckoutSteps step1="done" step2="done" step3="active"/> 

    <h1 style="margin-block: 1.5rem;">Welp! That was a bummer! Your payment was canceled!</h1>
    <p>Redirecting you to the main page in     <span id="countdown">4</span> seconds </p>
</section>

 <script>
        let countdown = 4;

        function updateCountdown() {
            document.getElementById('countdown')!.innerText = String(countdown);
        }

        function redirectAfterCooldown() {
            setTimeout(function () {
            location.href =location.origin;
            }, 5000);
        }

        function startCountdown() {
            updateCountdown();
            redirectAfterCooldown();

            var countdownInterval = setInterval(function () {
                countdown -= 1;
                updateCountdown();

                if (countdown <= 0) {
                    clearInterval(countdownInterval);
                }
            }, 1000); 
        }
        if (location.href === `${location.origin}/checkout/cancel`) {
  location.href = "/";
}
        document.addEventListener('DOMContentLoaded', startCountdown);
    </script>